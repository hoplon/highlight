(ns hoplon.highlight
  (:require
    [cljsjs.highlight]))

(defelem highlight
  [{:keys [class] :as attr} kids]
  (with-let [c (pre (apply (code :class class) kids))]
    (with-init!
      (.highlightBlock js/hljs c))))

(defn highlight-pre-code []
  (.each (js/jQuery "pre code")
    (fn [i block] (.highlightBlock js/hljs block))))
